<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="LeakSense - IoT Sensor Monitoring Dashboard">
    <meta name="theme-color" content="#0f172a">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>LeakSense - IoT Sensor Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Mobile Navigation Menu (Hidden on Desktop) -->
    <nav class="nav-menu" id="navMenu">
        <div class="nav-header">
            <h2>LeakSense</h2>
            <button class="nav-close" onclick="toggleMobileMenu()">√ó</button>
        </div>
        <ul class="nav-links">
            <li><a href="#" class="nav-link active" onclick="showPage('dashboard')" data-page="dashboard">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                </svg>
                Dashboard
            </a></li>
            <li><a href="#" class="nav-link" onclick="showPage('report')" data-page="report">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                    <line x1="12" y1="9" x2="12" y2="13"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                Report Issue
            </a></li>
            <li><a href="#" class="nav-link" onclick="showPage('community')" data-page="community">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                Community
            </a></li>
        </ul>
    </nav>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                    </svg>
                    <h1>LeakSense</h1>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="desktop-nav">
                    <a href="#" onclick="showPage('dashboard')" class="desktop-nav-link active" data-page="dashboard">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                        </svg>
                        Dashboard
                    </a>
                    <a href="#" onclick="showPage('report')" class="desktop-nav-link" data-page="report">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                            <line x1="12" y1="9" x2="12" y2="13"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                        Report Issue
                    </a>
                    <a href="#" onclick="showPage('community')" class="desktop-nav-link" data-page="community">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                        Community
                    </a>
                </nav>
                
                <div class="status-indicator">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="statusText">Connecting...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page active">
        <div class="container">
            <!-- Alert Banner -->
            <div class="alert-banner" id="alertBanner" style="display: none;">
                <div class="alert-content">
                    <svg class="alert-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        <line x1="12" y1="9" x2="12" y2="13"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    <div class="alert-text" id="alertText"></div>
                </div>
                <button class="alert-close" onclick="closeAlert()">√ó</button>
            </div>

            <!-- Sensor Cards -->
            <div class="sensor-grid">
                <!-- Pressure Card -->
                <div class="sensor-card pressure-card">
                    <div class="card-header">
                        <div class="card-icon pressure-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                        </div>
                        <div class="card-title">
                            <h3>Pressure</h3>
                            <span class="card-subtitle">Water System</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="sensor-value">
                            <span class="value" id="pressureValue">--</span>
                            <span class="unit">PSI</span>
                        </div>
                        <div class="gauge-container">
                            <canvas id="pressureGauge"></canvas>
                        </div>
                        <div class="sensor-stats">
                            <div class="stat">
                                <span class="stat-label">Min</span>
                                <span class="stat-value" id="pressureMin">--</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Avg</span>
                                <span class="stat-value" id="pressureAvg">--</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Max</span>
                                <span class="stat-value" id="pressureMax">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Moisture Card -->
                <div class="sensor-card moisture-card">
                    <div class="card-header">
                        <div class="card-icon moisture-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
                            </svg>
                        </div>
                        <div class="card-title">
                            <h3>Moisture</h3>
                            <span class="card-subtitle">Leak Detection</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="sensor-value">
                            <span class="value" id="moistureValue">--</span>
                            <span class="unit">%</span>
                        </div>
                        <div class="gauge-container">
                            <canvas id="moistureGauge"></canvas>
                        </div>
                        <div class="sensor-stats">
                            <div class="stat">
                                <span class="stat-label">Min</span>
                                <span class="stat-value" id="moistureMin">--</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Avg</span>
                                <span class="stat-value" id="moistureAvg">--</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Max</span>
                                <span class="stat-value" id="moistureMax">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Acoustic Card -->
                <div class="sensor-card acoustic-card">
                    <div class="card-header">
                        <div class="card-icon acoustic-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M9 18V5l12-2v13"/>
                                <circle cx="6" cy="18" r="3"/>
                                <circle cx="18" cy="16" r="3"/>
                            </svg>
                        </div>
                        <div class="card-title">
                            <h3>Acoustic</h3>
                            <span class="card-subtitle">Sound Level</span>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="sensor-value">
                            <span class="value" id="acousticValue">--</span>
                            <span class="unit">dB</span>
                        </div>
                        <div class="gauge-container">
                            <canvas id="acousticGauge"></canvas>
                        </div>
                        <div class="sensor-stats">
                            <div class="stat">
                                <span class="stat-label">Min</span>
                                <span class="stat-value" id="acousticMin">--</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Avg</span>
                                <span class="stat-value" id="acousticAvg">--</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Max</span>
                                <span class="stat-value" id="acousticMax">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>Real-Time Sensor Data</h3>
                        <div class="chart-controls">
                            <select id="timeRange" onchange="updateTimeRange()">
                                <option value="1">Last Hour</option>
                                <option value="6">Last 6 Hours</option>
                                <option value="24" selected>Last 24 Hours</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Info Cards -->
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                        </svg>
                    </div>
                    <div class="info-content">
                        <h4>Total Readings</h4>
                        <p class="info-value" id="totalReadings">--</p>
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                    </div>
                    <div class="info-content">
                        <h4>Last Update</h4>
                        <p class="info-value" id="lastUpdate">--</p>
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 20h9"/>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                        </svg>
                    </div>
                    <div class="info-content">
                        <h4>Signal Strength</h4>
                        <p class="info-value" id="signalStrength">--</p>
                    </div>
                </div>

                <div class="info-card">
                    <div class="info-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                            <line x1="12" y1="9" x2="12" y2="13"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </div>
                    <div class="info-content">
                        <h4>Active Alerts</h4>
                        <p class="info-value" id="activeAlerts">0</p>
                    </div>
                </div>
            </div>
        </div>
        </div>
        <!-- End Dashboard Page -->

        <!-- Report Issue Page -->
        <div id="reportPage" class="page">
            <div class="container">
                <div class="page-header">
                    <h2>Report an Issue</h2>
                    <p>Help us identify and fix problems quickly</p>
                </div>

                <div class="report-form-card">
                    <form id="reportForm" onsubmit="submitReport(event)">
                        <div class="form-group">
                            <label for="issueType">Issue Type *</label>
                            <select id="issueType" required>
                                <option value="">Select issue type</option>
                                <option value="leak">Water Leak Detected</option>
                                <option value="pressure">Abnormal Pressure</option>
                                <option value="moisture">High Moisture</option>
                                <option value="acoustic">Unusual Sound</option>
                                <option value="sensor">Sensor Malfunction</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="location">Location *</label>
                            <input type="text" id="location" placeholder="e.g., Building A, Floor 2, Room 201" required>
                        </div>

                        <div class="form-group">
                            <label for="severity">Severity *</label>
                            <select id="severity" required>
                                <option value="">Select severity</option>
                                <option value="low">Low - Minor issue</option>
                                <option value="medium">Medium - Needs attention</option>
                                <option value="high">High - Urgent</option>
                                <option value="critical">Critical - Emergency</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="description">Description *</label>
                            <textarea id="description" rows="4" placeholder="Describe the issue in detail..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="reporterName">Your Name *</label>
                            <input type="text" id="reporterName" placeholder="Enter your name" required>
                        </div>

                        <div class="form-group">
                            <label for="reporterContact">Contact (Email/Phone)</label>
                            <input type="text" id="reporterContact" placeholder="Optional">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M22 2L11 13"/>
                                    <path d="M22 2L15 22L11 13L2 9L22 2Z"/>
                                </svg>
                                Submit Report
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetReportForm()">
                                Clear Form
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Recent Reports -->
                <div class="recent-reports">
                    <h3>Recent Reports</h3>
                    <div id="recentReportsList" class="reports-list">
                        <!-- Reports will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
        <!-- End Report Issue Page -->

        <!-- Community Leaderboard Page -->
        <div id="communityPage" class="page">
            <div class="container">
                <div class="page-header">
                    <h2>Community Leaderboard</h2>
                    <p>Top contributors who help keep our system safe</p>
                </div>

                <!-- Leaderboard Stats -->
                <div class="leaderboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-info">
                            <h4>Total Reports</h4>
                            <p class="stat-value" id="totalReports">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-info">
                            <h4>Fastest Response</h4>
                            <p class="stat-value" id="fastestResponse">--</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-info">
                            <h4>Issues Resolved</h4>
                            <p class="stat-value" id="issuesResolved">0</p>
                        </div>
                    </div>
                </div>

                <!-- Leaderboard Table -->
                <div class="leaderboard-card">
                    <div class="leaderboard-header">
                        <h3>Top Contributors</h3>
                        <select id="leaderboardPeriod" onchange="updateLeaderboard()">
                            <option value="week">This Week</option>
                            <option value="month" selected>This Month</option>
                            <option value="all">All Time</option>
                        </select>
                    </div>
                    <div class="leaderboard-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Name</th>
                                    <th>Reports</th>
                                    <th>Points</th>
                                    <th>Badge</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboardBody">
                                <!-- Leaderboard data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Achievements Section -->
                <div class="achievements-section">
                    <h3>Achievements & Badges</h3>
                    <div class="achievements-grid">
                        <div class="achievement-card">
                            <div class="achievement-icon">ü•á</div>
                            <h4>First Reporter</h4>
                            <p>First to report an issue</p>
                            <span class="achievement-points">+50 pts</span>
                        </div>
                        <div class="achievement-card">
                            <div class="achievement-icon">‚ö°</div>
                            <h4>Speed Demon</h4>
                            <p>Report within 5 minutes</p>
                            <span class="achievement-points">+30 pts</span>
                        </div>
                        <div class="achievement-card">
                            <div class="achievement-icon">üî•</div>
                            <h4>Hot Streak</h4>
                            <p>5 reports in a week</p>
                            <span class="achievement-points">+100 pts</span>
                        </div>
                        <div class="achievement-card">
                            <div class="achievement-icon">üéØ</div>
                            <h4>Accurate Reporter</h4>
                            <p>10 verified reports</p>
                            <span class="achievement-points">+150 pts</span>
                        </div>
                        <div class="achievement-card">
                            <div class="achievement-icon">üëë</div>
                            <h4>Community Hero</h4>
                            <p>Top contributor of the month</p>
                            <span class="achievement-points">+500 pts</span>
                        </div>
                        <div class="achievement-card">
                            <div class="achievement-icon">üíé</div>
                            <h4>Diamond Status</h4>
                            <p>1000+ total points</p>
                            <span class="achievement-points">Legendary</span>
                        </div>
                    </div>
                </div>

                <!-- Prize Information -->
                <div class="prize-info">
                    <h3>üéÅ Monthly Prizes</h3>
                    <div class="prize-grid">
                        <div class="prize-card gold">
                            <div class="prize-rank">ü•á 1st Place</div>
                            <h4>$100 Gift Card</h4>
                            <p>+ Premium Badge</p>
                        </div>
                        <div class="prize-card silver">
                            <div class="prize-rank">ü•à 2nd Place</div>
                            <h4>$50 Gift Card</h4>
                            <p>+ Silver Badge</p>
                        </div>
                        <div class="prize-card bronze">
                            <div class="prize-rank">ü•â 3rd Place</div>
                            <h4>$25 Gift Card</h4>
                            <p>+ Bronze Badge</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Community Page -->
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 LeakSense. IoT Sensor Monitoring System.</p>
        </div>
    </footer>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon success">‚úì</div>
            <h3>Success!</h3>
            <p id="modalMessage">Your report has been submitted successfully.</p>
            <button onclick="closeModal()" class="btn btn-primary">OK</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/charts.js"></script>
</body>
</html>
